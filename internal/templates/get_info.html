<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TeamFind - Дополнительная информация</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #0f172a;
            color: #f1f5f9;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        
        .container {
            max-width: 800px;
            width: 100%;
            background-color: #1e293b;
            border-radius: 12px;
            padding: 40px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
        }
        
        .header {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .logo {
            font-size: 32px;
            font-weight: 700;
            margin-bottom: 10px;
            color: #3b82f6;
        }
        
        .subtitle {
            color: #94a3b8;
            font-size: 16px;
            margin-bottom: 10px;
        }
        
        h1 {
            font-size: 28px;
            margin-bottom: 5px;
            color: #f1f5f9;
        }
        
        .progress-bar {
            height: 6px;
            background-color: #334155;
            border-radius: 3px;
            margin: 20px 0 30px;
            overflow: hidden;
        }
        
        .progress {
            height: 100%;
            background: linear-gradient(to right, #3b82f6, #8b5cf6);
            width: 50%;
            border-radius: 3px;
        }
        
        .form-section {
            margin-bottom: 30px;
        }
        
        .section-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 15px;
            color: #e2e8f0;
            padding-bottom: 8px;
            border-bottom: 2px solid #334155;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: #cbd5e1;
        }
        
        input, select, textarea {
            width: 100%;
            padding: 12px 15px;
            background-color: #334155;
            border: 1px solid #475569;
            border-radius: 8px;
            color: #f1f5f9;
            font-size: 16px;
            transition: border-color 0.3s;
        }
        
        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: #3b82f6;
        }
        
        textarea {
            min-height: 100px;
            resize: vertical;
        }
        
        .radio-group, .checkbox-group {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-top: 10px;
        }
        
        .radio-item, .checkbox-item {
            display: flex;
            align-items: center;
            margin-right: 20px;
        }
        
        .radio-item input, .checkbox-item input {
            width: auto;
            margin-right: 8px;
        }
        
        .games-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 10px;
        }
        
        .game-card {
            background-color: #334155;
            border: 2px solid #475569;
            border-radius: 8px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .game-card:hover {
            border-color: #3b82f6;
            transform: translateY(-2px);
        }
        
        .game-card.selected {
            border-color: #3b82f6;
            background-color: rgba(59, 130, 246, 0.1);
        }
        
        .game-card h3 {
            font-size: 16px;
            margin-bottom: 5px;
            color: #f1f5f9;
        }
        
        .game-card p {
            font-size: 14px;
            color: #94a3b8;
        }
        
        .btn-container {
            display: flex;
            justify-content: space-between;
            margin-top: 40px;
        }
        
        .btn {
            padding: 14px 30px;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            border: none;
        }
        
        .btn-primary {
            background: linear-gradient(to right, #3b82f6, #8b5cf6);
            color: white;
        }
        
        .btn-secondary {
            background-color: #475569;
            color: #f1f5f9;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }
        
        .btn-primary:hover {
            box-shadow: 0 5px 15px rgba(59, 130, 246, 0.4);
        }
        
        .skip-link {
            text-align: center;
            margin-top: 20px;
        }
        
        .skip-link a {
            color: #94a3b8;
            text-decoration: none;
        }
        
        .skip-link a:hover {
            color: #3b82f6;
            text-decoration: underline;
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 25px;
            }
            
            .games-grid {
                grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            }
            
            .btn-container {
                flex-direction: column;
                gap: 15px;
            }
            
            .btn {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="logo">TeamFind</div>
            <p class="subtitle">Почти готово! Расскажите о себе больше</p>
            <h1>Дополнительная информация</h1>
        </div>
        
        <div class="progress-bar">
            <div class="progress"></div>
        </div>
        
        <form id="profileDetailsForm">
            <div class="form-section">
                <h2 class="section-title">Основная информация</h2>
                
                <div class="form-group">
                    <label for="age">Возраст</label>
                    <input type="number" id="age" name="age" min="13" max="100" placeholder="Сколько вам лет?">
                </div>
                
                <div class="form-group">
                    <label for="country">Страна</label>
                    <input type="text" id="country" name="country" placeholder="Из какой вы страны?">
                </div>
                
                <div class="form-group">
                    <label>Язык общения</label>
                    <div class="radio-group">
                        <div class="radio-item">
                            <input type="radio" id="lang_ru" name="language" value="ru" checked>
                            <label for="lang_ru">Русский</label>
                        </div>
                        <div class="radio-item">
                            <input type="radio" id="lang_en" name="language" value="en">
                            <label for="lang_en">Английский</label>
                        </div>
                        <div class="radio-item">
                            <input type="radio" id="lang_both" name="language" value="both">
                            <label for="lang_both">Оба</label>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="form-section">
                <h2 class="section-title">Способы общения</h2>
                
                <div class="form-group">
                    <label>Выберите предпочтительные способы связи</label>
                    <div class="checkbox-group">
                        <div class="checkbox-item">
                            <input type="checkbox" id="comms_discord" name="communication" value="discord" checked>
                            <label for="comms_discord">Discord</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="comms_teamspeak" name="communication" value="teamspeak">
                            <label for="comms_teamspeak">TeamSpeak</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="comms_skype" name="communication" value="skype">
                            <label for="comms_skype">Skype</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="comms_telegram" name="communication" value="telegram">
                            <label for="comms_telegram">Telegram</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="comms_in-game" name="communication" value="in-game">
                            <label for="comms_in-game">Голосовой чат в игре</label>
                        </div>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="discord_tag">Discord тег (если есть)</label>
                    <input type="text" id="discord_tag" name="discord_tag" placeholder="username#1234">
                </div>
            </div>
            
            <div class="form-section">
                <h2 class="section-title">Игровые предпочтения</h2>
                
                <div class="form-group">
                    <label>Любимые жанры</label>
                    <div class="checkbox-group">
                        <div class="checkbox-item">
                            <input type="checkbox" id="genre_moba" name="genres" value="moba">
                            <label for="genre_moba">MOBA</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="genre_fps" name="genres" value="fps" checked>
                            <label for="genre_fps">Шутеры (FPS)</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="genre_rpg" name="genres" value="rpg">
                            <label for="genre_rpg">RPG</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="genre_strategy" name="genres" value="strategy">
                            <label for="genre_strategy">Стратегии</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="genre_survival" name="genres" value="survival">
                            <label for="genre_survival">Выживание</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="genre_racing" name="genres" value="racing">
                            <label for="genre_racing">Гонки</label>
                        </div>
                    </div>
                </div>
                
                <div class="form-group">
                    <label>Выберите любимые игры (можно несколько)</label>
                    <div class="games-grid" id="gamesGrid">
                        <!-- Игры будут добавлены через JavaScript -->
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="playstyle">Игровой стиль</label>
                    <select id="playstyle" name="playstyle">
                        <option value="">Выберите стиль игры</option>
                        <option value="competitive">Соревновательный (хочу побеждать)</option>
                        <option value="casual">Казуальный (для удовольствия)</option>
                        <option value="mixed">Смешанный (зависит от настроения)</option>
                        <option value="learning">Учусь играть</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="description">О себе (необязательно)</label>
                    <textarea id="description" name="description" placeholder="Расскажите о себе, своих игровых предпочтениях, что ищете в тиммейтах..."></textarea>
                </div>
            </div>
            
            <div class="btn-container">
                <button type="button" class="btn btn-secondary" id="skipBtn">Пропустить</button>
                <button type="submit" class="btn btn-primary">Сохранить и продолжить</button>
            </div>
            
            <div class="skip-link">
                <a href="/dashboard">Можно заполнить позже в профиле →</a>
            </div>
        </form>
    </div>

    <script>
        // Список популярных игр
        const games = [
            { id: 'dota2', name: 'Dota 2', genre: 'MOBA' },
            { id: 'cs2', name: 'Counter-Strike 2', genre: 'FPS' },
            { id: 'valorant', name: 'Valorant', genre: 'FPS' },
            { id: 'lol', name: 'League of Legends', genre: 'MOBA' },
            { id: 'overwatch', name: 'Overwatch 2', genre: 'FPS' },
            { id: 'apex', name: 'Apex Legends', genre: 'FPS' },
            { id: 'wow', name: 'World of Warcraft', genre: 'RPG' },
            { id: 'destiny2', name: 'Destiny 2', genre: 'FPS/RPG' },
            { id: 'rainbow6', name: 'Rainbow Six Siege', genre: 'FPS' },
            { id: 'pubg', name: 'PUBG', genre: 'Battle Royale' },
            { id: 'fortnite', name: 'Fortnite', genre: 'Battle Royale' },
            { id: 'minecraft', name: 'Minecraft', genre: 'Sandbox' },
            { id: 'rocketleague', name: 'Rocket League', genre: 'Sports' },
            { id: 'genshin', name: 'Genshin Impact', genre: 'RPG' },
            { id: 'lostark', name: 'Lost Ark', genre: 'RPG' }
        ];

        // Генерация карточек игр
        const gamesGrid = document.getElementById('gamesGrid');
        const selectedGames = new Set();

        games.forEach(game => {
            const gameCard = document.createElement('div');
            gameCard.className = 'game-card';
            gameCard.dataset.id = game.id;
            
            gameCard.innerHTML = `
                <h3>${game.name}</h3>
                <p>${game.genre}</p>
            `;
            
            gameCard.addEventListener('click', () => {
                gameCard.classList.toggle('selected');
                if (gameCard.classList.contains('selected')) {
                    selectedGames.add(game.id);
                } else {
                    selectedGames.delete(game.id);
                }
            });
            
            gamesGrid.appendChild(gameCard);
        });

        // Обработка формы
        document.getElementById('profileDetailsForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            // Собираем данные формы
            const formData = {
                age: document.getElementById('age').value,
                country: document.getElementById('country').value,
                language: document.querySelector('input[name="language"]:checked').value,
                communication: Array.from(document.querySelectorAll('input[name="communication"]:checked'))
                    .map(cb => cb.value),
                discord_tag: document.getElementById('discord_tag').value,
                genres: Array.from(document.querySelectorAll('input[name="genres"]:checked'))
                    .map(cb => cb.value),
                favorite_games: Array.from(selectedGames),
                playstyle: document.getElementById('playstyle').value,
                description: document.getElementById('description').value
            };
            
            console.log('Данные профиля:', formData);
            
            // Отправка данных на сервер
            fetch('/api/profile/details', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(formData)
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    // Перенаправляем на главную или дашборд
                    window.location.href = '/dashboard';
                } else {
                    alert('Ошибка сохранения: ' + data.message);
                }
            })
            .catch(error => {
                console.error('Error:', error);
                alert('Ошибка соединения с сервером');
            });
        });

        // Кнопка пропуска
        document.getElementById('skipBtn').addEventListener('click', function() {
            if (confirm('Пропустить заполнение профиля? Вы сможете заполнить его позже в настройках.')) {
                window.location.href = '/dashboard';
            }
        });

        // Автофокус на первое поле
        document.getElementById('age').focus();
    </script>
</body>
</html>